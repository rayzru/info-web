# –ê—É–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Production - 2026-02-14

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** | 44 |
| **–° –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–º email** | 21 (48%) |
| **–ë–ï–ó –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–≥–æ email** | 23 (52%) ‚ùå |
| **–° –ø–∞—Ä–æ–ª–µ–º** | 35 (80%) |
| **–ë–µ–∑ –ø–∞—Ä–æ–ª—è (OAuth only)** | 9 (20%) |
| **–£–¥–∞–ª—ë–Ω–Ω—ã–µ** | 0 |
| **–ê–∫—Ç–∏–≤–Ω—ã–µ** | 44 |

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ö†Ô∏è 17 –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π (PASSWORD –ë–ï–ó VERIFICATION)

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å —á–µ—Ä–µ–∑ email/password, –Ω–æ –ù–ï –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏ email.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ù–µ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É (–±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ `EMAIL_NOT_VERIFIED`)
- –ò–º–µ—é—Ç –ø–∞—Ä–æ–ª—å –≤ –ë–î, –Ω–æ –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- Verification tokens –∏—Å—Ç–µ–∫–ª–∏ (24+ —á–∞—Å–∞ –Ω–∞–∑–∞–¥)

**–î–µ—Ç–∞–ª–∏**:

| Email | Name | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω | –ß–∞—Å–æ–≤ –Ω–∞–∑–∞–¥ | –í–∞–ª–∏–¥–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ |
|-------|------|----------------|-------------|------------------|
| gc@extroverse.ca | xKDGURKYhtkutlHZZL | 2026-02-12 13:35 | 57.86 | 0 |
| e_rookwood@yahoo.co.uk | kUNKUdLZIOVpVgIqWFpafYh | 2026-02-12 13:08 | 58.31 | 0 |
| trish.foster@hafele.us | YavFQCBLRXkKhMKnW | 2026-02-12 11:31 | 59.92 | 0 |
| gevina@yahoo.com | KfnTWAblbSPcThRoh | 2026-02-12 03:11 | 68.25 | 0 |
| adicriscio@kokosing.biz | dbeYZbFSsVeMlprSYeNXIav | 2026-02-12 02:40 | 68.78 | 0 |
| ritli@moravia.com | TTtFOEfLWeItkeVrnbrzpdL | 2026-02-11 08:08 | 87.30 | 0 |
| terry.botta@purolator.com | fRDWTkWKVowLJcdcGDpN | 2026-02-11 06:40 | 88.78 | 0 |
| jobyjsolis@outlook.com | IFGxNWNggzVeUjDukAlmqiJ | 2026-02-10 16:16 | 103.17 | 0 |
| kevinsterner@brandpoet.com | aSqQbtZBBjqsyheF | 2026-02-10 16:05 | 103.36 | 0 |
| ey.aly.p.c@gmail.com | aoYSaBAJXQIHGgDtGWdIX | 2026-02-10 07:44 | 111.71 | 0 |
| marques.eugene@outlook.com | qVlqGJdOFZVDAuDTpZax | 2026-02-09 17:49 | 125.62 | 0 |
| sharon-giuliana@gmx.ch | dHpVDExxRSHUERoiD | 2026-02-09 03:32 | 139.91 | 0 |
| allen.lann.oy.e@gmail.com | mgCFzEjHjAZJIqPv | 2026-02-08 20:57 | 146.49 | 0 |
| smacpeek@yahoo.com | MNlbUCULWtWVAHzlu | 2026-02-07 20:22 | 171.08 | 0 |
| fa.i.d.e.l85@gmail.com | XjYYyChdxnhUqDqQa | 2026-02-07 05:11 | 186.26 | 0 |
| lexychristensen@aol.com | onsQrAYJUQzFcvfCA | 2026-02-06 02:01 | 213.43 | 0 |
| w.aze.kepu.vu.77@gmail.com | CeMmAQNfecuBrtCvKwgeDY | 2026-02-05 05:15 | 234.19 | 0 |

**–ü–û–î–û–ó–†–ï–ù–ò–ï**: –≠—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ **–°–ü–ê–ú-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** –∏–ª–∏ **–±–æ—Ç—ã**!

**–ü—Ä–∏–∑–Ω–∞–∫–∏**:
1. ‚úÖ –°–ª—É—á–∞–π–Ω—ã–µ –∏–º–µ–Ω–∞ (xKDGURKYhtkutlHZZL, kUNKUdLZIOVpVgIqWFpafYh)
2. ‚úÖ –ù–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email (–Ω–µ –ø—Ä–æ—à–ª–∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é)
3. ‚úÖ –ë–æ–ª—å—à–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ (2+ –Ω–µ–¥–µ–ª–∏)
4. ‚úÖ Email –≤—ã–≥–ª—è–¥—è—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ (—Å–ª—É—á–∞–π–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã)

---

### 2. ‚ö†Ô∏è 39 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ë–ï–ó –ø—Ä–æ—Ñ–∏–ª—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `user_profile`.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è**:
- –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è (bio, avatar, phone –∏ —Ç.–¥.)
- –ú–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º, –∑–∞–≤—è–∑–∞–Ω–Ω—ã–º –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å

**–ù—É–∂–¥–∞—é—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ**:

**–†–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (—Å—É–¥—è –ø–æ email –∏ –∏–º–µ–Ω–∞–º):
- 83003@rambler.ru (–õ–∞—Ä–∏—Å–∞)
- kaminskaya@vosmodels.com (Inna Kaminskaya)
- julia-153@yandex.ru (–Æ–ª–∏—è –§–æ–º–∏—á–µ–Ω–∫–æ)
- nanusya-k@mail.ru (–ù–∞–∏—Ä–∏ –ú–∞—Ä—å–µ–≤–∞)
- viktoriya.poryadina@mail.ru (–†–æ–¥–∏–æ–Ω–æ–≤–∞ –í–∏–∫—Ç–æ—Ä–∏—è)
- daniil228777@mail.ru (Daniil Sapozhkov)
- yaroslav.tokmakov.2003@mail.ru (–¢–æ–∫–º–∞–∫–æ–≤ –Ø—Ä–æ—Å–ª–∞–≤)
- katya.dudnikowa@yandex.ru
- glip@glip.me (–ù–∞—Ç–∞–ª—å—è)
- denis-kvitka@yandex.ru (–î–µ–Ω–∏—Å –í–ª–∞–¥–∏—Å–ª–∞–≤–æ–≤–∏—á)
- elenabs_2010@mail.ru (–ï–ª–µ–Ω–∞)
- marshal_4@mail.ru (–ê–Ω–¥—Ä–µ–µ–≤ –û–ª–µ–≥)
- ok.galichenko@yandex.ru (–ò–≤–∞–Ω–æ–≤–∞ –ú–∞—Ä–∏—è)
- alexbegaev@yandex.ru (–ê–ª–µ–∫—Å–µ–π –ë–µ–≥–∞–µ–≤)
- axera2008@mail.ru (–í–∏–∫—Ç–æ—Ä –†–æ–º–∞–Ω–æ–≤)
- birlena@mail.ru (–ï–ª–µ–Ω–∞)
- siruniansofia@gmail.com (–°–æ—Ñ—å—è –°–∏—Ä—É–Ω—è–Ω)

**–°–ø–∞–º-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** (—Ç–µ –∂–µ 17 —Å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π)

---

### 3. ‚ö†Ô∏è 17 –∏—Å—Ç—ë–∫—à–∏—Ö verification tokens

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–æ–∫–µ–Ω—ã –∏—Å—Ç–µ–∫–ª–∏, –Ω–æ –æ—Å—Ç–∞–ª–∏—Å—å –≤ –ë–î.

**–î–µ–π—Å—Ç–≤–∏–µ**: –ù—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞).

**–î–µ—Ç–∞–ª–∏**:
- –í—Å–µ —Ç–æ–∫–µ–Ω—ã –∏—Å—Ç–µ–∫–ª–∏ 24+ —á–∞—Å–∞ –Ω–∞–∑–∞–¥
- –ù–∏ –æ–¥–∏–Ω –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω (`used_at IS NULL`)
- –°–≤—è–∑–∞–Ω—ã —Å —Ç–µ–º–∏ –∂–µ 17 —Å–ø–∞–º-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º–∏

---

## ‚úÖ –•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏

1. **‚úÖ –ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ —Å–ø–æ—Å–æ–±–∞ –≤—Ö–æ–¥–∞** (—Å–∏—Ä–æ—Ç)
2. **‚úÖ –ù–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
3. **‚úÖ –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö password reset tokens** (–≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã/–∏—Å—Ç–µ–∫–ª–∏)
4. **‚úÖ –ù–µ—Ç Telegram users** (–ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
5. **‚úÖ –ù–µ—Ç –¥—É–±–ª–µ–π email**

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–æ–ª—è–º

| –†–æ–ª—å | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
|------|--------------------------|
| **Guest** | 38 (86%) |
| **Moderator** | 2 |
| **Admin** | 2 |
| **Root** | 2 |
| **Editor** | 1 |
| **SuperAdmin** | 1 |
| **ApartmentOwner** | 1 |

**–ò–¢–û–ì–û**: 47 —Ä–æ–ª–µ–π –¥–ª—è 44 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

#### 1. –£–¥–∞–ª–∏—Ç—å —Å–ø–∞–º-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**SQL**:
```sql
-- –£–¥–∞–ª–∏—Ç—å 17 –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
DELETE FROM email_verification_token
WHERE user_id IN (
  SELECT id FROM "user"
  WHERE password_hash IS NOT NULL
    AND email_verified IS NULL
    AND created_at < NOW() - INTERVAL '7 days'
);

DELETE FROM user_role
WHERE user_id IN (
  SELECT id FROM "user"
  WHERE password_hash IS NOT NULL
    AND email_verified IS NULL
    AND created_at < NOW() - INTERVAL '7 days'
);

DELETE FROM "user"
WHERE password_hash IS NOT NULL
  AND email_verified IS NULL
  AND created_at < NOW() - INTERVAL '7 days';
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è = —è–≤–Ω—ã–µ –º—ë—Ä—Ç–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
- –ò–º–µ–Ω–∞ —è–≤–Ω–æ —Å–ª—É—á–∞–π–Ω—ã–µ (–±–æ—Ç—ã)
- –¢–æ–∫–µ–Ω—ã –∏—Å—Ç–µ–∫–ª–∏
- –ù–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Ü–µ–Ω–Ω–æ—Å—Ç–∏

#### 2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**SQL**:
```sql
-- –°–æ–∑–¥–∞—Ç—å user_profile –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ–≥–æ –Ω–µ—Ç
INSERT INTO user_profile (user_id, created_at, updated_at)
SELECT
  id,
  NOW(),
  NOW()
FROM "user"
WHERE id NOT IN (SELECT user_id FROM user_profile)
  AND (is_deleted = false OR is_deleted IS NULL)
  AND email_verified IS NOT NULL; -- –¢–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- –ü—Ä–æ—Ñ–∏–ª—å –Ω—É–∂–µ–Ω –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- –°–æ–∑–¥–∞—ë–º —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω—è—Ç—Å—è –ø–æ–∑–∂–µ —Å–∞–º–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### 3. –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç—ë–∫—à–∏–µ verification tokens

**SQL**:
```sql
-- –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç—ë–∫—à–∏–µ –∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π)
DELETE FROM email_verification_token
WHERE used_at IS NULL
  AND expires < NOW() - INTERVAL '7 days';
```

### –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

#### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron-job –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏

**–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç**: `scripts/cron/cleanup-expired-tokens.ts`

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤
// –ó–∞–ø—É—Å–∫–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ

import { db } from "~/server/db";
import { emailVerificationTokens, passwordResetTokens, users } from "~/server/db/schema";
import { and, eq, lt } from "drizzle-orm";

export async function cleanupExpiredTokens() {
  const cutoffDate = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000); // 7 –¥–Ω–µ–π –Ω–∞–∑–∞–¥

  // 1. –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç—ë–∫—à–∏–µ verification tokens
  const deletedVerification = await db
    .delete(emailVerificationTokens)
    .where(
      and(
        lt(emailVerificationTokens.expires, cutoffDate),
        eq(emailVerificationTokens.usedAt, null)
      )
    );

  // 2. –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç—ë–∫—à–∏–µ password reset tokens
  const deletedReset = await db
    .delete(passwordResetTokens)
    .where(
      and(
        lt(passwordResetTokens.expires, cutoffDate),
        eq(passwordResetTokens.usedAt, null)
      )
    );

  // 3. –£–¥–∞–ª–∏—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (> 7 –¥–Ω–µ–π)
  const unverifiedUsers = await db
    .select({ id: users.id })
    .from(users)
    .where(
      and(
        eq(users.passwordHash, null),
        eq(users.emailVerified, null),
        lt(users.createdAt, cutoffDate)
      )
    );

  for (const user of unverifiedUsers) {
    await db.delete(users).where(eq(users.id, user.id));
  }

  console.log(`Cleanup complete:
    - Verification tokens: ${deletedVerification.count}
    - Reset tokens: ${deletedReset.count}
    - Unverified users: ${unverifiedUsers.length}
  `);
}
```

**GitHub Action**: `.github/workflows/cleanup-tokens.yml`

```yaml
name: Cleanup Expired Tokens

on:
  schedule:
    - cron: '0 3 * * *'  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00 UTC
  workflow_dispatch:

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: oven-sh/setup-bun@v1
      - run: bun install
      - name: Run cleanup
        run: bun run scripts/cron/cleanup-expired-tokens.ts
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
```

#### 5. –î–æ–±–∞–≤–∏—Ç—å rate limiting –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

**–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–ø–∞–º–∞**:
- –õ–∏–º–∏—Ç: 5 —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π —Å –æ–¥–Ω–æ–≥–æ IP –≤ —á–∞—Å
- Captcha –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- Email domain blacklist (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ email —Å–µ—Ä–≤–∏—Å—ã)

### –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

#### 6. Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ö

–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞:
- "–í—ã –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏ email, –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ..."
- –ù–æ–≤–∞—è —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

## üìù SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –°–∫—Ä–∏–ø—Ç 1: –û—á–∏—Å—Ç–∫–∞ —Å–ø–∞–º-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π

```sql
-- –û–°–¢–û–†–û–ñ–ù–û: –£–¥–∞–ª—è–µ—Ç –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π!

BEGIN;

-- –ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ
SELECT id, email, name, created_at
FROM "user"
WHERE password_hash IS NOT NULL
  AND email_verified IS NULL
  AND created_at < NOW() - INTERVAL '7 days';

-- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
-- DELETE FROM "user"
-- WHERE password_hash IS NOT NULL
--   AND email_verified IS NULL
--   AND created_at < NOW() - INTERVAL '7 days';

ROLLBACK; -- –ò–ª–∏ COMMIT; –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
```

### –°–∫—Ä–∏–ø—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π

```sql
-- –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø—Ä–æ—Ñ–∏–ª—è (—Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ)

BEGIN;

INSERT INTO user_profile (user_id, created_at, updated_at)
SELECT
  u.id,
  NOW(),
  NOW()
FROM "user" u
WHERE u.id NOT IN (SELECT user_id FROM user_profile)
  AND (u.is_deleted = false OR u.is_deleted IS NULL)
  AND u.email_verified IS NOT NULL;

COMMIT;
```

### –°–∫—Ä–∏–ø—Ç 3: –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç—ë–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤

```sql
-- –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç—ë–∫—à–∏–µ verification tokens

BEGIN;

DELETE FROM email_verification_token
WHERE used_at IS NULL
  AND expires < NOW() - INTERVAL '7 days';

COMMIT;
```

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ verification tokens

| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------------|----------|
| –í—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö | 17 |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã > 30 –¥–Ω–µ–π –Ω–∞–∑–∞–¥ | 2 |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã > 7 –¥–Ω–µ–π –Ω–∞–∑–∞–¥ | 10 |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ | 1 |

**–í—ã–≤–æ–¥**: –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π.

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–º email

**21 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–º email** = —Ä–µ–∞–ª—å–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.

–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è, –∫–æ—Ç–æ—Ä–∞—è:
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞ email
- ‚úÖ –ú–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- ‚úÖ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –∞–∫—Ç–∏–≤–Ω–∞

### OAuth vs Email/Password

| –¢–∏–ø –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
|--------------------|------------|
| Email/Password | 35 (80%) |
| OAuth only | 9 (20%) |

**–í—ã–≤–æ–¥**: –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞—é—Ç email/password –≤–º–µ—Å—Ç–æ OAuth.

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [ ] **–£–¥–∞–ª–∏—Ç—å 17 —Å–ø–∞–º-—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π** (—Å–∫—Ä–∏–ø—Ç 1)
- [ ] **–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è 21 —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (—Å–∫—Ä–∏–ø—Ç 2)
- [ ] **–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç—ë–∫—à–∏–µ —Ç–æ–∫–µ–Ω—ã** (—Å–∫—Ä–∏–ø—Ç 3)
- [ ] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron-job** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏
- [ ] **–î–æ–±–∞–≤–∏—Ç—å rate limiting** –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- [ ] **–î–æ–±–∞–≤–∏—Ç—å captcha** –Ω–∞ —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- [ ] **–°–æ–∑–¥–∞—Ç—å email blacklist** (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ email)
- [ ] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π (–∞–ª–µ—Ä—Ç—ã –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–†–û–ß–ù–û**: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã 1-3 –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
2. **–í–ê–ñ–ù–û**: –°–æ–∑–¥–∞—Ç—å cron-job –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏
3. **–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û**: –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç —Å–ø–∞–º–∞ (captcha, rate limiting)
4. **–î–û–õ–ì–û–°–†–û–ß–ù–û**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π

---

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞**: 2026-02-14
**–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô (17 —Å–ø–∞–º-–∞–∫–∫–∞—É–Ω—Ç–æ–≤ + 21 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ –ø—Ä–æ—Ñ–∏–ª—è)
