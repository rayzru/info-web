# üéâ –†–µ–ª–∏–∑ v0.4.0 - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞**: 15 —Ñ–µ–≤—Ä–∞–ª—è 2026
**–¢–∏–ø**: Minor release (–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å + –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

---

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚ùå ‚Üí ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –ø–æ–ª–æ–º–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ beta.sr2.ru

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Å–ª–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∞–Ω—Ç–∏–±–æ—Ç-–∑–∞—â–∏—Ç—ã (PR #26) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ beta.sr2.ru –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–ª–æ–º–∞–ª–æ—Å—å —Å –æ—à–∏–±–∫–æ–π:
```
Application error: a client-side exception has occurred
‚ùå Attempted to access server-side environment variable on client
```

**–†–µ—à–µ–Ω–∏–µ** (PR #27):
- ‚úÖ –õ–æ–≥–≥–µ—Ä —Ç–µ–ø–µ—Ä—å **–∏–∑–æ–º–æ—Ä—Ñ–Ω—ã–π** (—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ)
- ‚úÖ –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è pino —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
- ‚úÖ –í –±—Ä–∞—É–∑–µ—Ä–µ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è console.* –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é —á–µ—Ä–µ–∑ `typeof window !== "undefined"`
- ‚úÖ Lazy loading pino –∏ env —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### üêõ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏–∑ code review (PR #26)

1. **SQL –±–∞–≥ –≤ bulkDelete** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `inArray()` –≤–º–µ—Å—Ç–æ spread `eq()`
   - –î–æ: `.where(and(...input.ids.map(id => eq(feedback.id, id))))` ‚ùå
   - –ü–æ—Å–ª–µ: `.where(and(inArray(feedback.id, input.ids)))` ‚úÖ

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - –¥–∞–Ω–Ω—ã–µ –º–æ–≥–ª–∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è bulk –æ–ø–µ—Ä–∞—Ü–∏–π

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - 100 sequential INSERTs
   - –î–æ: 100+ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚ùå
   - –ü–æ—Å–ª–µ: 1 batch insert ‚úÖ (10x –±—ã—Å—Ç—Ä–µ–µ)

---

## ‚ú® –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üìù –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Pino)

**–ó–∞—á–µ–º**: –ó–∞–º–µ–Ω–∞ 240+ –≤—ã–∑–æ–≤–æ–≤ `console.log/error/warn` –Ω–∞ structured logging

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ (production)
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –≤ development (pino-pretty)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç: –º–æ–¥—É–ª—å, –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —Å–µ—Ä–≤–∏—Å
- ‚úÖ –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫ —Å–æ stack traces
- ‚úÖ ISO timestamps
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–≥–µ—Ä—ã –¥–ª—è –º–æ–¥—É–ª–µ–π:
  - `authLogger` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - `emailLogger` - –æ—Ç–ø—Ä–∞–≤–∫–∞ email
  - `telegramLogger` - Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - `s3Logger` - S3 –æ–ø–µ—Ä–∞—Ü–∏–∏
  - `httpLogger` - tRPC –∑–∞–ø—Ä–æ—Å—ã
  - `dbLogger` - database –æ–ø–µ—Ä–∞—Ü–∏–∏
  - `cronLogger` - scheduled tasks

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```typescript
import { logger } from "~/lib/logger";

logger.info({ userId: "123" }, "User logged in");
logger.error({ err, context: "payment" }, "Payment failed");
logger.warn({ ip, attempts: 5 }, "Rate limit approaching");
```

**Helper —Ñ—É–Ω–∫—Ü–∏–∏**:
- `logError(logger, error, context)` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- `logSuccess(logger, message, context)` - —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `logWarning(logger, message, context)` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### üõ°Ô∏è –ê–Ω—Ç–∏–±–æ—Ç-–∑–∞—â–∏—Ç–∞ –¥–ª—è —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–ø–∞–º-–±–æ—Ç—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç —Ñ–æ—Ä–º—É feedback

**–†–µ—à–µ–Ω–∏–µ - –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞**:
1. **Honeypot field** - –Ω–µ–≤–∏–¥–∏–º–æ–µ –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–µ –±–æ—Ç—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç
2. **Time token** - –º–∏–Ω–∏–º—É–º 3 —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
3. **Browser fingerprint** - –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞

**Security event logging**:
- –í—Å–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–æ—Ç–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –ú–µ—Ç—Ä–∏–∫–∏: method (honeypot/time_token/fingerprint), IP, user-agent

### üóëÔ∏è Bulk delete –¥–ª—è spam cleanup

**Admin –ø–∞–Ω–µ–ª—å**:
- –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ feedback (soft delete)
- –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ 100 items –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —É–¥–∞–ª–µ–Ω–∏–π –≤ feedbackHistory
- Admin-only –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π permissions

---

## üîß DevOps —É–ª—É—á—à–µ–Ω–∏—è

### üöÄ Complete Deployment Workflow

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–µ–ø–ª–æ—è**:
```
feature/* ‚Üí development (beta) ‚Üí main (production)
    ‚Üì           ‚Üì                   ‚Üì
   CI        Beta Deploy        Prod Deploy
```

**Branch Protection** (main & development):
- ‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è Pull Request –¥–ª—è –ª—é–±—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ó–∞–ø—Ä–µ—â–µ–Ω force push
- ‚úÖ –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–¥–∞–ª–µ–Ω–∏–µ –≤–µ—Ç–æ–∫
- ‚úÖ Enforce –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

**CI/CD Pipelines**:
1. **Feature Branch CI** - lint, typecheck, build –Ω–∞ PR
2. **Beta Deployment** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ beta.sr2.ru
3. **Production Deployment** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ sr2.ru

**Workflow –ø—Ä–æ—Ü–µ—Å—Å**:
1. –°–æ–∑–¥–∞—Ç—å feature branch –∏–∑ `development`
2. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ push
3. –°–æ–∑–¥–∞—Ç—å PR –≤ `development` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ beta
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ beta
5. –°–æ–∑–¥–∞—Ç—å PR –∏–∑ `development` –≤ `main` ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ production

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Git –∏—Å—Ç–æ—Ä–∏–∏

**Security fix**: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ SMTP credentials –∏–∑ git history
- –£–¥–∞–ª–µ–Ω–æ –∏–∑ –≤—Å–µ—Ö 132 –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏
- –†–æ—Ç–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
- –û–±–Ω–æ–≤–ª–µ–Ω—ã GitHub secrets

---

## üóÑÔ∏è Database Changes

### Migration: `drizzle/0026_wealthy_loa.sql`
–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ feedbackHistory:
```sql
ALTER TYPE "feedback_history_action" ADD VALUE 'deleted';
```

**–ó–∞—á–µ–º**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏–π feedback –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**PR #26** (Anti-bot protection):
- 73 —Ñ–∞–π–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–æ
- 11,787 —Å—Ç—Ä–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–æ
- 447 —Å—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ

**PR #27** (Isomorphic logger hotfix):
- 3 —Ñ–∞–π–ª–∞ –∏–∑–º–µ–Ω–µ–Ω–æ
- 91 —Å—Ç—Ä–æ–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞
- 53 —Å—Ç—Ä–æ–∫–∏ —É–¥–∞–ª–µ–Ω–æ

**–í—Å–µ–≥–æ**:
- 240+ `console.*` –≤—ã–∑–æ–≤–æ–≤ –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ structured logging
- 2 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö SQL –±–∞–≥–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- 10x —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ batch –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**:
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è (0 –æ—à–∏–±–æ–∫)
- ‚úÖ Production build —É—Å–ø–µ—à–µ–Ω
- ‚úÖ beta.sr2.ru —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–≥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é
- ‚úÖ Anti-bot –∑–∞—â–∏—Ç–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–ø–∞–º
- ‚úÖ Bulk delete —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ CI/CD pipeline –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üöß Breaking Changes

**Deployment Workflow**:
- –¢–µ–ø–µ—Ä—å –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω –ø—Ä—è–º–æ–π push –≤ `main` –∏ `development`
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Pull Requests

**Git History**:
- –¢—Ä–µ–±—É–µ—Ç—Å—è fresh clone –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–∏–∑-–∑–∞ security cleanup)

---

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–û–±–Ω–æ–≤–ª–µ–Ω–æ**:
- `CHANGELOG.md` - –ø–æ–ª–Ω—ã–π changelog
- `DEPLOYMENT_WORKFLOW.md` - –Ω–æ–≤—ã–π workflow –ø—Ä–æ—Ü–µ—Å—Å
- JSDoc –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è admin procedures

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

**Code Review by**: Claude Sonnet 4.5
**Testing**: Comprehensive AI-powered testing
**Deployment**: Automated CI/CD via GitHub Actions

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ Deployed to beta.sr2.ru
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: Testing –Ω–∞ beta ‚Üí PR –≤ main ‚Üí Production deploy
